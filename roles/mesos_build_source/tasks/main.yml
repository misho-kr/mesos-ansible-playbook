---
# Procedure to build Mesos from source

- debug: msg="Procedure to build Mesos from source on = {{ ansible_distribution }}"

- include: build_prerequisites.yml

- debug: msg="*** BUILDING mesos {{ mesos_version }} from tag {{ mesos_git_tag }} ***"

- name: Checkout mesos git repo
  git: repo={{ mesos_git_repo_url }} dest={{ mesos_build_dir }}/mesos.git 
       version="{{ mesos_git_tag }}"
       update=yes
       force=yes
  register: new_source_code

- include: build_process.yml
  when: mesos_build_force or new_source_code|changed

- include: build_artifacts.yml
